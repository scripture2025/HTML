<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScriptBlox Open Source Finder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary: #0078d4;
            --primary-dark: #106ebe;
            --success: #238636;
            --warning: #f0883e;
            --danger: #da3633;
            --bg-dark: #0d1117;
            --bg-panel: #161b22;
            --bg-card: #1e1e1e;
            --bg-input: #2a2a2a;
            --border: #30363d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --text-muted: #6e7681;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--bg-panel) 0%, #1a1f29 100%);
            border-radius: 12px;
            padding: 25px 30px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .logo-section h1 {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary), #58a6ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }

        .logo-section p {
            color: var(--text-secondary);
            font-size: 16px;
            max-width: 600px;
            margin: 0 auto 25px;
        }

        /* Search Controls */
        .search-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .search-box {
            position: relative;
            margin-bottom: 15px;
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 18px;
        }

        #searchInput {
            width: 100%;
            padding: 16px 20px 16px 55px;
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s;
        }

        #searchInput:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.2);
        }

        #searchBtn {
            width: 100%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        #searchBtn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 120, 212, 0.4);
        }

        #searchBtn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Status */
        .status-section {
            margin-top: 20px;
            text-align: center;
        }

        #statusText {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 10px;
            min-height: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
            margin: 10px auto 0;
            display: none;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #58a6ff);
            width: 0%;
            transition: width 0.3s;
            border-radius: 3px;
        }

        .progress-text {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 5px;
            display: none;
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 25px;
            min-height: 600px;
        }

        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Scripts Panel */
        .scripts-panel {
            background: var(--bg-panel);
            border-radius: 12px;
            border: 1px solid var(--border);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h3 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sort-controls {
            display: flex;
            gap: 8px;
        }

        .sort-btn {
            background: var(--bg-input);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .sort-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .sort-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .scripts-list {
            flex: 1;
            overflow-y: auto;
            max-height: 600px;
        }

        .script-tab {
            padding: 18px 20px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .script-tab:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .script-tab.active {
            background: rgba(0, 120, 212, 0.15);
            border-left: 4px solid var(--primary);
        }

        .script-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), #58a6ff);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .script-info {
            flex: 1;
            min-width: 0;
        }

        .script-title {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .script-meta {
            display: flex;
            gap: 12px;
            font-size: 12px;
            color: var(--text-secondary);
            flex-wrap: wrap;
        }

        .script-game {
            background: rgba(0, 120, 212, 0.2);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .script-badge {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-open {
            background: rgba(35, 134, 54, 0.2);
            color: #3fb950;
        }

        .badge-verified {
            background: rgba(0, 120, 212, 0.2);
            color: #58a6ff;
        }

        .badge-key {
            background: rgba(218, 54, 51, 0.2);
            color: #f85149;
        }

        .badge-loadstring {
            background: rgba(248, 81, 73, 0.2);
            color: #f85149;
        }

        .panel-footer {
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.2);
            border-top: 1px solid var(--border);
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Script Viewer */
        .script-viewer {
            background: var(--bg-panel);
            border-radius: 12px;
            border: 1px solid var(--border);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .viewer-header {
            padding: 20px 25px;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 20px;
        }

        .script-details {
            flex: 1;
            min-width: 0;
        }

        #selectedScriptTitle {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 8px;
            word-break: break-word;
        }

        #selectedScriptInfo {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            flex-shrink: 0;
        }

        .action-btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .copy-btn {
            background: linear-gradient(135deg, var(--success), #2ea043);
            color: white;
        }

        .copy-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(35, 134, 54, 0.4);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* Script Content */
        .script-content {
            flex: 1;
            padding: 0;
            overflow-y: auto;
            max-height: 500px;
            position: relative;
        }

        #scriptContent {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.7;
            white-space: pre-wrap;
            word-break: break-word;
            color: var(--text-primary);
            min-height: 300px;
            overflow-x: auto;
            border: none;
            margin: 0;
        }

        .loadstring-info {
            background: rgba(248, 81, 73, 0.1);
            border: 1px solid rgba(248, 81, 73, 0.3);
            border-radius: 6px;
            padding: 10px 15px;
            margin: 15px 25px 0;
            font-size: 13px;
            color: #f85149;
            display: none;
        }

        .loadstring-info i {
            margin-right: 8px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 20px;
            margin-bottom: 10px;
        }

        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 25px;
            background: var(--success);
            color: white;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-input);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .viewer-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .action-buttons {
                width: 100%;
            }
            
            .action-btn {
                flex: 1;
                justify-content: center;
            }
            
            .panel-header {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }
            
            .sort-controls {
                justify-content: center;
            }
        }

        /* Demo Mode Warning */
        .demo-warning {
            background: rgba(248, 81, 73, 0.1);
            border: 1px solid rgba(248, 81, 73, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            display: none;
        }

        .demo-warning i {
            color: #f85149;
            margin-right: 10px;
        }

        .demo-warning p {
            margin: 0;
            font-size: 13px;
            color: #f85149;
        }

        /* API Selection */
        .api-selector {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .api-btn {
            background: var(--bg-input);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .api-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .api-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Source info */
        .source-info {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-section">
                <h1><i class="fas fa-code"></i> ScriptBlox Open Source Finder</h1>
                <p>Find clean, readable, open-source Roblox scripts. Searches all scripts and extracts code from loadstrings.</p>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Enter search term (e.g., 'admin', 'esp', 'fly', 'auto farm')">
                </div>
                
                <div class="api-selector">
                    <button class="api-btn active" data-api="search">Search Scripts</button>
                    <button class="api-btn" data-api="fetch">Latest Scripts</button>
                    <button class="api-btn" data-api="demo">Demo Mode</button>
                </div>
                
                <button id="searchBtn" class="search-btn">
                    <i class="fas fa-search"></i> Find Open Source Scripts
                </button>
                
                <div class="demo-warning" id="demoWarning">
                    <i class="fas fa-info-circle"></i>
                    <p>Demo Mode: Using sample data. Enable CORS extension for real API access.</p>
                </div>
            </div>
            
            <div class="status-section">
                <div id="statusText">Enter a search term or click "Latest Scripts"</div>
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Starting search...</div>
            </div>
        </header>

        <div class="main-layout">
            <!-- Left Panel - Scripts List -->
            <div class="scripts-panel">
                <div class="panel-header">
                    <h3><i class="fas fa-clipboard-list"></i> Open Source Scripts</h3>
                    <div class="sort-controls">
                        <button class="sort-btn active" data-sort="relevance">Relevance</button>
                        <button class="sort-btn" data-sort="views">Views</button>
                        <button class="sort-btn" data-sort="date">Recent</button>
                    </div>
                </div>
                
                <div class="scripts-list" id="scriptsList">
                    <div class="empty-state" id="emptyState">
                        <i class="fas fa-code-branch"></i>
                        <h3>No scripts found</h3>
                        <p>Search for scripts to find open-source ones</p>
                    </div>
                    
                    <div class="loading" id="scriptsLoading">
                        <div class="spinner"></div>
                        <p>Searching for open-source scripts...</p>
                        <p style="font-size: 12px; color: var(--text-muted); margin-top: 10px;">
                            Analyzing scripts and loadstrings (this may take a moment)...
                        </p>
                    </div>
                    
                    <!-- Script tabs will be inserted here -->
                </div>
                
                <div class="panel-footer">
                    <div id="statsText">Found: 0 open source scripts</div>
                    <div class="source-info" id="apiModeInfo">Searching all scripts</div>
                </div>
            </div>

            <!-- Right Panel - Script Viewer -->
            <div class="script-viewer">
                <div class="viewer-header">
                    <div class="script-details">
                        <h2 id="selectedScriptTitle">Select a Script</h2>
                        <div id="selectedScriptInfo">Click on a script from the list to view its content</div>
                    </div>
                    
                    <div class="action-buttons">
                        <button id="copyBtn" class="action-btn copy-btn" disabled>
                            <i class="fas fa-copy"></i> Copy Script
                        </button>
                    </div>
                </div>
                
                <div class="loadstring-info" id="loadstringInfo">
                    <i class="fas fa-link"></i>
                    <span>This contains a loadstring. Showing extracted content.</span>
                </div>
                
                <div class="script-content">
                    <pre id="scriptContent">Select a script from the left panel to view its content...</pre>
                </div>
                
                <div class="viewer-footer">
                    <div class="footer-item open-source">
                        <i class="fas fa-lock-open"></i>
                        <span>Open Source</span>
                    </div>
                    <div class="footer-item readable">
                        <i class="fas fa-eye"></i>
                        <span>Human Readable</span>
                    </div>
                    <div class="footer-item clean">
                        <i class="fas fa-shield-alt"></i>
                        <span>Not Obfuscated</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Script copied to clipboard!</span>
    </div>

    <script>
        class ScriptBloxViewer {
            constructor() {
                this.scripts = [];
                this.filteredScripts = [];
                this.selectedScript = null;
                this.currentSort = 'relevance';
                this.currentApi = 'search';
                this.isSearching = false;
                this.allScriptsData = [];
                this.loadstringCache = new Map();
                
                // Enhanced sample data with real open source scripts
                this.sampleData = this.createEnhancedSampleData();
                
                this.initializeElements();
                this.setupEventListeners();
            }
            
            createEnhancedSampleData() {
                return [
                    {
                        _id: "sample1",
                        title: "Admin Commands Script - OPEN SOURCE",
                        game: {
                            _id: "game1",
                            name: "Adopt Me",
                            imageUrl: ""
                        },
                        slug: "admin-commands-script-open-source",
                        verified: true,
                        key: false,
                        views: 15000,
                        scriptType: "Open Source",
                        isUniversal: true,
                        isPatched: false,
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString(),
                        image: "",
                        script: `-- Admin Commands Script
-- Open Source - Feel free to modify!

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local function onPlayerAdded(player)
    player.Chatted:Connect(function(message)
        if message:sub(1, 6) == "!admin" then
            local command = message:sub(8):lower()
            
            if command == "kick all" then
                for _, p in pairs(Players:GetPlayers()) do
                    if p ~= player then
                        p:Kick("Kicked by admin")
                    end
                end
            elseif command == "fly" then
                -- Fly script
                local flySpeed = 50
                local bodyVelocity = Instance.new("BodyVelocity")
                bodyVelocity.Velocity = Vector3.new(0, flySpeed, 0)
                bodyVelocity.Parent = player.Character.HumanoidRootPart
            end
        end
    end)
end

Players.PlayerAdded:Connect(onPlayerAdded)

print("Admin script loaded successfully!")`,
                        matched: ["admin", "commands", "script"]
                    },
                    {
                        _id: "sample2",
                        title: "Auto Farm with Loadstring Content",
                        game: {
                            _id: "game2",
                            name: "Blox Fruits",
                            imageUrl: ""
                        },
                        slug: "auto-farm-loadstring",
                        verified: false,
                        key: false,
                        views: 8500,
                        scriptType: "Open Source",
                        isUniversal: false,
                        isPatched: false,
                        createdAt: new Date(Date.now() - 86400000).toISOString(),
                        updatedAt: new Date(Date.now() - 86400000).toISOString(),
                        image: "",
                        script: `-- Auto Farm Script with loadstring
-- This fetches code from pastebin

loadstring(game:HttpGet("https://pastebin.com/raw/abc123"))()`,
                        matched: ["auto", "farm", "loadstring"],
                        loadstringContent: `-- Auto Farm Script - Extracted from loadstring
-- Open source farming script for Blox Fruits

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

local function findNearestMob()
    local nearest = nil
    local nearestDist = math.huge
    local char = Players.LocalPlayer.Character
    
    if not char then return nil end
    
    for _, mob in pairs(Workspace.Mobs:GetChildren()) do
        if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
            local dist = (mob.PrimaryPart.Position - char.PrimaryPart.Position).Magnitude
            if dist < nearestDist then
                nearestDist = dist
                nearest = mob
            end
        end
    end
    
    return nearest
end

local function autoFarm()
    while true do
        wait(1)
        local mob = findNearestMob()
        if mob then
            -- Attack the mob
            game:GetService("ReplicatedStorage").Remotes.Attack:FireServer(mob)
            print("Attacking:", mob.Name)
        end
    end
end

-- Start the auto farm
spawn(autoFarm)
print("Auto farm script started!")`
                    },
                    {
                        _id: "sample3",
                        title: "ESP Script - Player Highlight",
                        game: {
                            _id: "game3",
                            name: "Arsenal",
                            imageUrl: ""
                        },
                        slug: "esp-script-pvp",
                        verified: true,
                        key: false,
                        views: 22000,
                        scriptType: "Open Source",
                        isUniversal: true,
                        isPatched: false,
                        createdAt: new Date(Date.now() - 172800000).toISOString(),
                        updatedAt: new Date(Date.now() - 172800000).toISOString(),
                        image: "",
                        script: `-- ESP Script - Shows players through walls
-- Open Source Version

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local function createESP(player)
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local highlight = Instance.new("Highlight")
        highlight.FillColor = Color3.fromRGB(255, 0, 0)
        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
        highlight.FillTransparency = 0.5
        highlight.Parent = player.Character
        
        local billboard = Instance.new("BillboardGui")
        billboard.Size = UDim2.new(0, 100, 0, 40)
        billboard.StudsOffset = Vector3.new(0, 3, 0)
        billboard.AlwaysOnTop = true
        billboard.Parent = player.Character
        
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, 0, 1, 0)
        label.Text = player.Name
        label.TextColor3 = Color3.fromRGB(255, 255, 255)
        label.BackgroundTransparency = 1
        label.Parent = billboard
        
        print("ESP created for:", player.Name)
    end
end

for _, player in pairs(Players:GetPlayers()) do
    if player ~= Players.LocalPlayer then
        createESP(player)
    end
end

Players.PlayerAdded:Connect(function(player)
    if player ~= Players.LocalPlayer then
        player.CharacterAdded:Connect(function()
            wait(1)
            createESP(player)
        end)
    end
end)

print("ESP script loaded successfully!")`,
                        matched: ["esp", "pvp", "highlight"]
                    },
                    {
                        _id: "sample4",
                        title: "Fly Script - Universal",
                        game: {
                            _id: "game4",
                            name: "Any Game",
                            imageUrl: ""
                        },
                        slug: "fly-script-universal",
                        verified: true,
                        key: false,
                        views: 18000,
                        scriptType: "Open Source",
                        isUniversal: true,
                        isPatched: false,
                        createdAt: new Date(Date.now() - 259200000).toISOString(),
                        updatedAt: new Date(Date.now() - 259200000).toISOString(),
                        image: "",
                        script: `-- Universal Fly Script
-- Works in most Roblox games

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

local flySpeed = 50
local flying = false
local velocity = Vector3.new(0, 0, 0)

local function fly()
    flying = not flying
    if flying then
        humanoid.PlatformStand = true
        print("Fly enabled!")
    else
        humanoid.PlatformStand = false
        velocity = Vector3.new(0, 0, 0)
        print("Fly disabled!")
    end
end

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.F then
        fly()
    end
end)

RunService.Stepped:Connect(function()
    if flying then
        local forward = UserInputService:IsKeyDown(Enum.KeyCode.W) and 1 or 0
        local backward = UserInputService:IsKeyDown(Enum.KeyCode.S) and 1 or 0
        local left = UserInputService:IsKeyDown(Enum.KeyCode.A) and 1 or 0
        local right = UserInputService:IsKeyDown(Enum.KeyCode.D) and 1 or 0
        local up = UserInputService:IsKeyDown(Enum.KeyCode.Space) and 1 or 0
        local down = UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) and 1 or 0
        
        local moveDirection = Vector3.new(
            right - left,
            up - down,
            backward - forward
        )
        
        velocity = moveDirection.Unit * flySpeed
        root.Velocity = velocity
    end
end)

print("Fly script loaded! Press F to toggle")`,
                        matched: ["fly", "universal", "script"]
                    }
                ];
            }
            
            initializeElements() {
                this.elements = {
                    searchInput: document.getElementById('searchInput'),
                    searchBtn: document.getElementById('searchBtn'),
                    statusText: document.getElementById('statusText'),
                    progressBar: document.getElementById('progressBar'),
                    progressFill: document.getElementById('progressFill'),
                    progressText: document.getElementById('progressText'),
                    scriptsList: document.getElementById('scriptsList'),
                    emptyState: document.getElementById('emptyState'),
                    scriptsLoading: document.getElementById('scriptsLoading'),
                    statsText: document.getElementById('statsText'),
                    selectedScriptTitle: document.getElementById('selectedScriptTitle'),
                    selectedScriptInfo: document.getElementById('selectedScriptInfo'),
                    scriptContent: document.getElementById('scriptContent'),
                    loadstringInfo: document.getElementById('loadstringInfo'),
                    copyBtn: document.getElementById('copyBtn'),
                    toast: document.getElementById('toast'),
                    toastMessage: document.getElementById('toastMessage'),
                    demoWarning: document.getElementById('demoWarning'),
                    apiModeInfo: document.getElementById('apiModeInfo')
                };
            }
            
            setupEventListeners() {
                this.elements.searchBtn.addEventListener('click', () => this.searchScripts());
                this.elements.searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.searchScripts();
                });
                
                this.elements.copyBtn.addEventListener('click', () => this.copyScript());
                
                // Sort buttons
                document.querySelectorAll('.sort-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentSort = e.target.dataset.sort;
                        this.sortScripts();
                    });
                });
                
                // API mode buttons
                document.querySelectorAll('.api-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.api-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentApi = e.target.dataset.api;
                        this.updateApiMode();
                    });
                });
                
                // Add example search
                this.elements.searchInput.placeholder = "Try: 'admin', 'fly', 'esp', 'auto farm'";
                
                this.updateApiMode();
            }
            
            updateApiMode() {
                const apiInfo = {
                    'search': 'Searching all scripts',
                    'fetch': 'Fetching latest scripts',
                    'demo': 'Demo Mode (sample data)'
                };
                
                this.elements.apiModeInfo.textContent = apiInfo[this.currentApi];
                
                if (this.currentApi === 'demo') {
                    this.elements.demoWarning.style.display = 'block';
                    this.elements.searchBtn.innerHTML = '<i class="fas fa-play"></i> Load Demo Data';
                    this.elements.searchInput.disabled = false;
                } else if (this.currentApi === 'fetch') {
                    this.elements.demoWarning.style.display = 'none';
                    this.elements.searchBtn.innerHTML = '<i class="fas fa-search"></i> Fetch Latest Scripts';
                    this.elements.searchInput.disabled = false;
                    this.elements.searchInput.placeholder = "Optional filter (leave empty for all)";
                } else {
                    this.elements.demoWarning.style.display = 'none';
                    this.elements.searchBtn.innerHTML = '<i class="fas fa-search"></i> Search All Scripts';
                    this.elements.searchInput.disabled = false;
                    this.elements.searchInput.placeholder = "Search term (e.g., 'admin')";
                }
            }
            
            async searchScripts() {
                if (this.isSearching) {
                    this.showToast('Already searching. Please wait...', 'warning');
                    return;
                }
                
                const searchTerm = this.elements.searchInput.value.trim();
                
                if (this.currentApi === 'search' && !searchTerm) {
                    this.showStatus('Please enter a search term for Search mode', 'error');
                    return;
                }
                
                this.isSearching = true;
                this.showLoading(true);
                this.clearResults();
                
                this.showStatus(`Fetching scripts...`, 'loading');
                this.updateProgress(10, 'Starting search...');
                
                try {
                    if (this.currentApi === 'demo') {
                        await this.fetchDemoData(searchTerm);
                    } else {
                        await this.fetchRealData(searchTerm);
                    }
                } catch (error) {
                    console.error('Search error:', error);
                    this.showStatus(`Error: ${error.message}. Switching to demo mode...`, 'error');
                    
                    // Fall back to demo mode
                    document.querySelectorAll('.api-btn').forEach(b => b.classList.remove('active'));
                    document.querySelector('[data-api="demo"]').classList.add('active');
                    this.currentApi = 'demo';
                    this.updateApiMode();
                    
                    await this.fetchDemoData(searchTerm);
                } finally {
                    this.isSearching = false;
                }
            }
            
            async fetchDemoData(searchTerm) {
                this.updateProgress(30, 'Loading demo data...');
                
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                this.scripts = [...this.sampleData];
                
                // Apply search filter if provided
                if (searchTerm) {
                    const searchLower = searchTerm.toLowerCase();
                    this.scripts = this.scripts.filter(script => {
                        const title = (script.title || '').toLowerCase();
                        const gameName = (script.game?.name || '').toLowerCase();
                        const scriptText = (script.script || '').toLowerCase();
                        const loadstringContent = (script.loadstringContent || '').toLowerCase();
                        const matched = script.matched || [];
                        
                        // Check if any part matches
                        return title.includes(searchLower) ||
                               gameName.includes(searchLower) ||
                               scriptText.includes(searchLower) ||
                               loadstringContent.includes(searchLower) ||
                               matched.some(m => m.includes(searchLower));
                    });
                }
                
                this.updateProgress(70, 'Analyzing scripts for open source...');
                
                // Analyze each script
                for (let i = 0; i < this.scripts.length; i++) {
                    const script = this.scripts[i];
                    await this.analyzeScript(script);
                    
                    const progress = 70 + (i / this.scripts.length * 25);
                    this.updateProgress(progress, `Analyzing script ${i + 1}/${this.scripts.length}`);
                }
                
                this.filterOpenSourceScripts();
                this.sortScripts();
                
                const count = this.filteredScripts.length;
                if (count === 0) {
                    this.showStatus('No open-source scripts found', 'warning');
                } else {
                    this.showStatus(`Found ${count} open-source scripts`, 'success');
                }
                
                this.updateProgress(100, 'Done!');
                setTimeout(() => this.showLoading(false), 1000);
            }
            
            async fetchRealData(searchTerm) {
                let apiUrl;
                
                if (this.currentApi === 'fetch') {
                    apiUrl = 'https://scriptblox.com/api/script/fetch';
                    if (searchTerm) {
                        apiUrl += `?q=${encodeURIComponent(searchTerm)}`;
                    }
                } else {
                    apiUrl = `https://scriptblox.com/api/script/search?q=${encodeURIComponent(searchTerm)}`;
                }
                
                this.updateProgress(20, 'Connecting to API...');
                
                // Try to fetch data
                let data;
                try {
                    // Try CORS proxy first
                    const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(apiUrl)}`;
                    const response = await fetch(proxyUrl, {
                        headers: {
                            'Accept': 'application/json'
                        }
                    });
                    
                    if (!response.ok) throw new Error(`Proxy error: ${response.status}`);
                    
                    const proxyData = await response.json();
                    data = JSON.parse(proxyData.contents);
                    
                } catch (proxyError) {
                    console.warn('Proxy failed:', proxyError);
                    
                    // Try direct fetch (may fail due to CORS)
                    try {
                        const response = await fetch(apiUrl, {
                            mode: 'cors',
                            headers: {
                                'Accept': 'application/json'
                            }
                        });
                        
                        if (!response.ok) throw new Error(`Direct error: ${response.status}`);
                        data = await response.json();
                        
                    } catch (directError) {
                        console.warn('Direct fetch failed:', directError);
                        throw new Error('Cannot access API due to CORS restrictions');
                    }
                }
                
                if (data.message) {
                    throw new Error(data.message);
                }
                
                this.scripts = data.result?.scripts || [];
                
                if (this.scripts.length === 0) {
                    throw new Error('No scripts found');
                }
                
                this.updateProgress(40, `Found ${this.scripts.length} scripts. Fetching details...`);
                
                // Fetch detailed information for each script
                for (let i = 0; i < this.scripts.length; i++) {
                    const script = this.scripts[i];
                    
                    try {
                        if (script.slug) {
                            // Try to get individual script data
                            const detailUrl = `https://scriptblox.com/api/script/${script.slug}`;
                            const proxyDetailUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(detailUrl)}`;
                            
                            const detailResponse = await fetch(proxyDetailUrl);
                            if (detailResponse.ok) {
                                const detailData = await detailResponse.json();
                                const parsedDetail = JSON.parse(detailData.contents);
                                
                                if (parsedDetail.script) {
                                    // Merge script data
                                    script.script = parsedDetail.script.script || script.script;
                                    script.features = parsedDetail.script.features;
                                    script.tags = parsedDetail.script.tags;
                                    script.owner = parsedDetail.script.owner;
                                    script.likeCount = parsedDetail.script.likeCount;
                                    script.dislikeCount = parsedDetail.script.dislikeCount;
                                }
                            }
                        }
                    } catch (error) {
                        console.warn(`Failed to fetch details for ${script.slug}:`, error);
                    }
                    
                    const progress = 40 + (i / this.scripts.length * 30);
                    this.updateProgress(progress, `Fetching details ${i + 1}/${this.scripts.length}`);
                    
                    // Add delay to avoid rate limiting
                    await new Promise(resolve => setTimeout(resolve, 500));
                }
                
                this.updateProgress(70, 'Analyzing scripts for open source...');
                
                // Analyze scripts
                for (let i = 0; i < this.scripts.length; i++) {
                    const script = this.scripts[i];
                    await this.analyzeScript(script);
                    
                    const progress = 70 + (i / this.scripts.length * 25);
                    this.updateProgress(progress, `Analyzing ${i + 1}/${this.scripts.length}`);
                }
                
                this.filterOpenSourceScripts();
                this.sortScripts();
                
                const count = this.filteredScripts.length;
                this.showStatus(`Found ${count} open-source scripts`, 'success');
                
                this.updateProgress(100, 'Analysis complete!');
                setTimeout(() => this.showLoading(false), 1000);
            }
            
            async analyzeScript(script) {
                const scriptContent = script.script || '';
                
                if (!scriptContent) {
                    script.isOpenSource = false;
                    return;
                }
                
                // Check for loadstrings
                const loadstringMatch = scriptContent.match(/loadstring\(([^)]+)\)/);
                if (loadstringMatch) {
                    script.containsLoadstring = true;
                    
                    // Try to extract URL
                    const urlMatch = loadstringMatch[1].match(/['"](https?:\/\/[^'"]+)['"]/);
                    if (urlMatch) {
                        script.loadstringUrl = urlMatch[1];
                        
                        // Try to fetch loadstring content
                        if (!this.loadstringCache.has(script.loadstringUrl)) {
                            try {
                                const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(script.loadstringUrl)}`;
                                const response = await fetch(proxyUrl, { timeout: 5000 });
                                
                                if (response.ok) {
                                    const data = await response.json();
                                    const content = data.contents;
                                    
                                    if (content && content.length > 0) {
                                        this.loadstringCache.set(script.loadstringUrl, content);
                                        script.loadstringContent = content;
                                        script.analyzedContent = content;
                                    }
                                }
                            } catch (error) {
                                console.warn('Failed to fetch loadstring:', error);
                            }
                        } else {
                            script.loadstringContent = this.loadstringCache.get(script.loadstringUrl);
                            script.analyzedContent = script.loadstringContent;
                        }
                    }
                }
                
                // Use loadstring content if available, otherwise use original script
                const contentToAnalyze = script.loadstringContent || scriptContent;
                script.analyzedContent = contentToAnalyze;
                
                // Check if it's open source
                script.isOpenSource = this.isOpenSource(contentToAnalyze);
            }
            
            isOpenSource(content) {
                if (!content || content.trim().length < 50) {
                    return false;
                }
                
                const contentLower = content.toLowerCase();
                
                // Obfuscation patterns to reject
                const obfuscationPatterns = [
                    /\[char\]/i,
                    /fromcharcode/i,
                    /\\x[a-f0-9]{2}/i,
                    /[0-9a-f]{32,}/i,
                    /\|\|.*\|\|/,
                    /\w{50,}/,
                    /eval\(.*function\(\)\{/i,
                    /local\s+[a-f0-9]{16,}/i
                ];
                
                // Check for obfuscation
                for (const pattern of obfuscationPatterns) {
                    if (pattern.test(content)) {
                        return false;
                    }
                }
                
                // Check for minified code (very few line breaks)
                const lines = content.split('\n');
                if (lines.length < 5 && content.length > 200) {
                    return false;
                }
                
                // Check for readable Lua/Roblox patterns
                const readablePatterns = [
                    /local\s+\w+\s*=/,
                    /function\s+\w+\(/,
                    /game:GetService\(/,
                    /workspace/,
                    /player/i,
                    /wait\(/,
                    /print\(/
                ];
                
                let readableScore = 0;
                for (const pattern of readablePatterns) {
                    if (pattern.test(content)) {
                        readableScore++;
                    }
                }
                
                // Check for comments (good sign)
                const hasComments = /--/.test(content) || /\/\//.test(content);
                
                // Check for proper indentation
                const hasIndentation = /\t/.test(content) || /    /.test(content);
                
                // Consider it open source if:
                // 1. Has at least 3 readable patterns OR has comments
                // 2. Has indentation OR is reasonably structured
                // 3. Not obfuscated
                // 4. Has reasonable length
                return (readableScore >= 3 || hasComments) &&
                       (hasIndentation || lines.length >= 3) &&
                       content.length >= 100;
            }
            
            filterOpenSourceScripts() {
                this.filteredScripts = this.scripts.filter(script => {
                    return script.isOpenSource === true;
                });
            }
            
            sortScripts() {
                switch (this.currentSort) {
                    case 'views':
                        this.filteredScripts.sort((a, b) => (b.views || 0) - (a.views || 0));
                        break;
                    case 'date':
                        this.filteredScripts.sort((a, b) => 
                            new Date(b.createdAt || 0) - new Date(a.createdAt || 0)
                        );
                        break;
                    case 'relevance':
                    default:
                        // Sort by loadstring content first (more valuable), then views
                        this.filteredScripts.sort((a, b) => {
                            const aHasLoadstring = a.loadstringContent ? 2 : 0;
                            const bHasLoadstring = b.loadstringContent ? 2 : 0;
                            
                            if (bHasLoadstring !== aHasLoadstring) {
                                return bHasLoadstring - aHasLoadstring;
                            }
                            return (b.views || 0) - (a.views || 0);
                        });
                        break;
                }
                
                this.renderScriptTabs();
            }
            
            renderScriptTabs() {
                const container = this.elements.scriptsList;
                const loading = this.elements.scriptsLoading;
                const empty = this.elements.emptyState;
                
                // Clear existing tabs
                const existingTabs = container.querySelectorAll('.script-tab');
                existingTabs.forEach(tab => tab.remove());
                
                // Hide/show empty state
                if (this.filteredScripts.length === 0) {
                    empty.style.display = 'block';
                    loading.style.display = 'none';
                } else {
                    empty.style.display = 'none';
                    loading.style.display = 'none';
                    
                    // Create new tabs
                    this.filteredScripts.forEach((script, index) => {
                        const tab = this.createScriptTab(script, index);
                        container.appendChild(tab);
                    });
                    
                    // Select first script automatically
                    if (this.filteredScripts.length > 0 && !this.selectedScript) {
                        setTimeout(() => {
                            const firstTab = container.querySelector('.script-tab');
                            if (firstTab) firstTab.click();
                        }, 100);
                    }
                }
                
                // Update stats
                const loadstringCount = this.filteredScripts.filter(s => s.loadstringContent).length;
                const stats = `Found: ${this.filteredScripts.length} open source scripts`;
                const extra = loadstringCount > 0 ? ` (${loadstringCount} with loadstrings)` : '';
                this.elements.statsText.textContent = stats + extra;
            }
            
            createScriptTab(script, index) {
                const tab = document.createElement('div');
                tab.className = 'script-tab';
                tab.dataset.index = index;
                
                // Truncate title
                let title = script.title || 'Untitled Script';
                if (title.length > 50) {
                    title = title.substring(0, 47) + '...';
                }
                
                // Format date
                const date = script.createdAt ? 
                    new Date(script.createdAt).toLocaleDateString('en-US', { 
                        month: 'short', 
                        day: 'numeric' 
                    }) : 'Unknown';
                
                // Badges
                let badges = '';
                
                if (script.loadstringContent) {
                    badges += '<span class="script-badge badge-loadstring">LOADSTRING</span>';
                }
                
                if (script.verified) {
                    badges += '<span class="script-badge badge-verified">VERIFIED</span>';
                }
                
                if (!script.key && !script.keyLink) {
                    badges += '<span class="script-badge badge-open">OPEN</span>';
                }
                
                tab.innerHTML = `
                    <div class="script-icon">
                        ${script.loadstringContent ? '<i class="fas fa-link"></i>' : '<i class="fas fa-code"></i>'}
                    </div>
                    <div class="script-info">
                        <div class="script-title">${this.escapeHtml(title)}</div>
                        <div class="script-meta">
                            <span class="script-game">${this.escapeHtml(script.game?.name || 'Unknown')}</span>
                            <span><i class="far fa-eye"></i> ${script.views || 0}</span>
                            <span><i class="far fa-calendar"></i> ${date}</span>
                            ${badges}
                        </div>
                    </div>
                `;
                
                tab.addEventListener('click', () => this.selectScript(script, tab));
                return tab;
            }
            
            selectScript(script, tabElement) {
                // Update selected tab styling
                document.querySelectorAll('.script-tab').forEach(t => {
                    t.classList.remove('active');
                });
                tabElement.classList.add('active');
                
                this.selectedScript = script;
                
                // Get content to display
                let displayContent = '';
                let isLoadstring = false;
                
                if (script.loadstringContent) {
                    displayContent = script.loadstringContent;
                    isLoadstring = true;
                } else {
                    displayContent = script.script || 'No script content available';
                }
                
                // Update UI
                this.elements.loadstringInfo.style.display = isLoadstring ? 'block' : 'none';
                
                let title = script.title || 'Untitled Script';
                if (title.length > 60) {
                    title = title.substring(0, 57) + '...';
                }
                
                this.elements.selectedScriptTitle.textContent = title;
                
                // Build info
                const infoParts = [];
                if (script.game?.name) infoParts.push(script.game.name);
                if (script.views) infoParts.push(`${script.views} views`);
                if (isLoadstring) infoParts.push('From Loadstring');
                if (script.scriptType) infoParts.push(script.scriptType);
                
                this.elements.selectedScriptInfo.textContent = infoParts.join('  ');
                
                // Display content - CLEAN TEXT WITHOUT BROKEN HTML
                this.elements.scriptContent.textContent = displayContent;
                
                // Apply simple syntax highlighting
                this.applyCleanSyntaxHighlighting(displayContent);
                
                // Enable copy button
                this.elements.copyBtn.disabled = false;
                
                this.showStatus('Script loaded', 'success');
            }
            
            applyCleanSyntaxHighlighting(content) {
                // Create a clean text display without broken HTML
                const lines = content.split('\n');
                let highlighted = '';
                
                for (const line of lines) {
                    // Simple keyword highlighting
                    let highlightedLine = this.escapeHtml(line);
                    
                    // Highlight Lua keywords
                    const keywords = ['local', 'function', 'end', 'if', 'then', 'else', 'elseif', 
                                    'for', 'while', 'do', 'repeat', 'until', 'break', 'return', 
                                    'in', 'not', 'and', 'or', 'nil', 'true', 'false'];
                    
                    keywords.forEach(keyword => {
                        const regex = new RegExp(`\\b(${keyword})\\b`, 'g');
                        highlightedLine = highlightedLine.replace(regex, `<span style="color: #ff7b72; font-weight: bold;">$1</span>`);
                    });
                    
                    // Highlight strings
                    highlightedLine = highlightedLine.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g, 
                        `<span style="color: #a5d6ff;">$&</span>`);
                    
                    // Highlight comments
                    if (highlightedLine.includes('--')) {
                        const commentIndex = highlightedLine.indexOf('--');
                        highlightedLine = highlightedLine.substring(0, commentIndex) + 
                                         `<span style="color: #8b949e; font-style: italic;">` + 
                                         highlightedLine.substring(commentIndex) + 
                                         `</span>`;
                    }
                    
                    // Highlight numbers
                    highlightedLine = highlightedLine.replace(/\b(\d+\.?\d*)\b/g, 
                        `<span style="color: #79c0ff;">$1</span>`);
                    
                    highlighted += highlightedLine + '\n';
                }
                
                this.elements.scriptContent.innerHTML = highlighted;
            }
            
            async copyScript() {
                if (!this.selectedScript) {
                    this.showToast('No script selected', 'error');
                    return;
                }
                
                let contentToCopy = '';
                
                if (this.selectedScript.loadstringContent) {
                    contentToCopy = this.selectedScript.loadstringContent;
                } else {
                    contentToCopy = this.selectedScript.script || '';
                }
                
                if (!contentToCopy) {
                    this.showToast('No script content to copy', 'error');
                    return;
                }
                
                try {
                    await navigator.clipboard.writeText(contentToCopy);
                    this.showToast('Script copied to clipboard!', 'success');
                } catch (error) {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = contentToCopy;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    
                    this.showToast('Script copied to clipboard!', 'success');
                }
            }
            
            clearResults() {
                this.scripts = [];
                this.filteredScripts = [];
                this.selectedScript = null;
                
                this.elements.scriptsList.querySelectorAll('.script-tab').forEach(tab => tab.remove());
                this.elements.emptyState.style.display = 'block';
                this.elements.scriptsLoading.style.display = 'none';
                
                this.elements.selectedScriptTitle.textContent = 'Select a Script';
                this.elements.selectedScriptInfo.textContent = 'Click on a script from the list to view its content';
                this.elements.scriptContent.textContent = 'Select a script from the left panel to view its content...';
                this.elements.loadstringInfo.style.display = 'none';
                
                this.elements.copyBtn.disabled = true;
                
                this.elements.statsText.textContent = 'Found: 0 open source scripts';
            }
            
            showLoading(show) {
                const progressBar = this.elements.progressBar;
                const progressText = this.elements.progressText;
                const searchBtn = this.elements.searchBtn;
                
                if (show) {
                    progressBar.style.display = 'block';
                    progressText.style.display = 'block';
                    this.elements.progressFill.style.width = '10%';
                    searchBtn.disabled = true;
                    searchBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Searching...';
                    this.elements.scriptsLoading.style.display = 'block';
                    this.elements.emptyState.style.display = 'none';
                } else {
                    setTimeout(() => {
                        progressBar.style.display = 'none';
                        progressText.style.display = 'none';
                        this.elements.progressFill.style.width = '0%';
                        searchBtn.disabled = false;
                        this.updateApiMode();
                        this.elements.scriptsLoading.style.display = 'none';
                    }, 500);
                }
            }
            
            updateProgress(percent, message) {
                this.elements.progressFill.style.width = `${percent}%`;
                this.elements.progressText.textContent = message;
                
                if (percent < 30) {
                    this.elements.progressFill.style.background = 'linear-gradient(90deg, #da3633, #f0883e)';
                } else if (percent < 70) {
                    this.elements.progressFill.style.background = 'linear-gradient(90deg, #f0883e, #79c0ff)';
                } else {
                    this.elements.progressFill.style.background = 'linear-gradient(90deg, #79c0ff, #3fb950)';
                }
            }
            
            showStatus(message, type = 'info') {
                const statusText = this.elements.statusText;
                statusText.textContent = message;
                
                switch (type) {
                    case 'success':
                        statusText.style.color = '#3fb950';
                        break;
                    case 'error':
                        statusText.style.color = '#da3633';
                        break;
                    case 'warning':
                        statusText.style.color = '#f0883e';
                        break;
                    case 'loading':
                        statusText.style.color = '#79c0ff';
                        break;
                    default:
                        statusText.style.color = '#8b949e';
                }
            }
            
            showToast(message, type = 'success') {
                const toast = this.elements.toast;
                const toastMessage = this.elements.toastMessage;
                
                toastMessage.textContent = message;
                
                switch (type) {
                    case 'success':
                        toast.style.background = 'linear-gradient(135deg, #238636, #2ea043)';
                        break;
                    case 'error':
                        toast.style.background = 'linear-gradient(135deg, #da3633, #f85149)';
                        break;
                    case 'warning':
                        toast.style.background = 'linear-gradient(135deg, #f0883e, #f0883e)';
                        break;
                }
                
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
            
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            window.scriptViewer = new ScriptBloxViewer();
            
            // Auto-set example and load demo
            setTimeout(() => {
                document.getElementById('searchInput').value = 'admin';
                window.scriptViewer.showStatus('Ready! Try searching for scripts or use demo mode.', 'info');
            }, 500);
        });
    </script>
</body>
</html>
